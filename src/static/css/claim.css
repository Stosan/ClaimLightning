
:root{
  --bg:#0f172a;           /* slate-900 */
  --surface:#0b1220;      /* deep surface */
  --card:#111827;         /* gray-900 */
  --text:#e5e7eb;         /* gray-200 */
  --muted:#94a3b8;        /* slate-400 */
  --outline:#334155;      /* slate-700 */
  --primary:#6750A4;      /* Material3 */
  --primary-variant:#7f67be;
  --success:#22c55e;      /* green-500 */
  --error:#ef4444;        /* red-500 */
  --radius:16px;
  --shadow:0 10px 30px rgba(0,0,0,.35),0 2px 8px rgba(0,0,0,.3);
  --sidebar-w:320px;
}
@media (prefers-color-scheme: light){
  :root{
    --bg:#f6f7fb; --surface:#fff; --card:#fff; --text:#0b1020; --muted:#5f6b7a; --outline:#e5e7eb; --shadow:0 18px 35px rgba(17,24,39,.08),0 6px 12px rgba(17,24,39,.06);
  }
}
html,body{height:100%;margin:0;background:radial-gradient(1200px 600px at 5% 0%, rgba(103,80,164,.15), transparent 60%),radial-gradient(900px 500px at 100% 10%, rgba(127,103,190,.12), transparent 60%),var(--bg);color:var(--text);font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Noto Sans", "Helvetica Neue", Arial;}
.app{display:grid;grid-template-rows:auto 1fr; height:100%;}
.topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 18px;border-bottom:1px solid var(--outline);backdrop-filter:saturate(140%) blur(8px);background:linear-gradient(180deg, color-mix(in oklab, var(--card) 88%, transparent), color-mix(in oklab, var(--surface) 92%, transparent));position:sticky;top:0;z-index:10}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:28px;height:28px;border-radius:8px;background:conic-gradient(from 210deg,#7f67be,#6750A4,#9b87f5,#7f67be);position:relative;box-shadow:0 6px 16px rgba(103,80,164,.35), inset 0 0 0 1px rgba(255,255,255,.08)}
.logo:after{content:"";position:absolute;inset:6px 7px 6px 10px;background:linear-gradient(180deg,#fff,#e2e8f0);clip-path:polygon(60% 0%, 40% 40%, 70% 40%, 35% 100%, 45% 55%, 20% 55%)}
.top-actions{display:flex;align-items:center;gap:10px}
.chip{font-size:.85rem;color:var(--muted);border:1px solid var(--outline);padding:6px 10px;border-radius:999px}
.btn{border:0;border-radius:12px;background:linear-gradient(180deg,var(--primary),var(--primary-variant));color:#fff;padding:10px 14px;font-weight:600;box-shadow:0 8px 18px rgba(103,80,164,.35);cursor:pointer}

.main{display:grid;grid-template-columns:1fr var(--sidebar-w); gap:16px; height:calc(100vh - 62px); padding:16px}
@media (max-width: 980px){ .main{grid-template-columns:1fr} .sidebar{order:-1; height:280px} }

/* Chat panel */
.chat-card{height:100%;display:grid;grid-template-rows:1fr auto; background:linear-gradient(180deg,var(--card),var(--surface));border:1px solid var(--outline);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
.messages{padding:16px; overflow:auto; display:flex; flex-direction:column; gap:10px; scroll-behavior:smooth}
.msg{max-width:min(72ch, 80%); padding:10px 12px; border:1px solid var(--outline); border-radius:14px; background:color-mix(in oklab, var(--surface) 95%, transparent);}
.msg.user{align-self:flex-end; background:color-mix(in oklab, var(--primary) 12%, var(--surface)); border-color:color-mix(in oklab, var(--primary) 35%, var(--outline))}
.msg.agent{align-self:flex-start}
.stamp{display:block; color:var(--muted); font-size:.75rem; margin-top:4px}

/* Composer */
.composer-wrap{border-top:1px solid var(--outline); background:linear-gradient(180deg, color-mix(in oklab, var(--surface) 96%, transparent), var(--surface)); padding:12px}
.composer{display:flex; align-items:center; gap:10px; background:color-mix(in oklab, var(--surface) 96%, transparent); border:1px solid var(--outline); border-radius:999px; padding:6px 8px 6px 8px}
.icon-btn{display:inline-grid; place-items:center; width:40px; height:40px; border-radius:999px; border:0; background:transparent; color:var(--muted); cursor:pointer}
.icon-btn:focus-visible{outline:2px solid color-mix(in oklab, var(--primary) 60%, transparent)}
.input{flex:1; min-height:44px; border:0; outline:none; background:transparent; color:var(--text); font-size:1rem; padding:8px}
.send{width:44px; height:44px; border-radius:999px; border:0; display:grid; place-items:center; background:linear-gradient(180deg,var(--primary),var(--primary-variant)); color:#fff; cursor:pointer; box-shadow:0 8px 18px rgba(103,80,164,.35)}

/* Sidebar */
.sidebar{background:linear-gradient(180deg,var(--card),var(--surface)); border:1px solid var(--outline); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden; display:flex; flex-direction:column}
.side-head{display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--outline)}
.side-title{font-weight:600; font-size:.98rem}
.file-list{flex:1; overflow:auto; display:grid; gap:8px; padding:12px}
.file{display:grid; grid-template-columns:40px 1fr auto; gap:10px; align-items:center; padding:8px; border:1px solid var(--outline); border-radius:12px; background:color-mix(in oklab, var(--surface) 95%, transparent)}
.thumb{width:40px; height:40px; border-radius:8px; background:#0d1526; display:grid; place-items:center; overflow:hidden}
.file-name{white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.progress{height:6px; border-radius:999px; background:color-mix(in oklab, var(--outline) 60%, transparent); overflow:hidden}
.bar{height:100%; width:0%; background:linear-gradient(90deg,var(--primary),var(--primary-variant))}
.hidden{display:none}

.drop{margin:12px; border:1.5px dashed color-mix(in oklab, var(--primary) 50%, var(--outline)); border-radius:14px; padding:12px; text-align:center; color:var(--muted)}
.drop.drag{background:color-mix(in oklab, var(--primary) 8%, transparent)}
